<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- AvaTax API Configuration in Odoo -->
    
    <record id="avalara_salestax_view_form" model="ir.ui.view">
        <field name="name">avalara.salestax.form</field>
        <field name="model">avalara.salestax</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="AvaTax API">
                <sheet>
                    <group col="6" colspan="4">
                        <field name="company_code"/>
                        <field name="company_id" groups="base.group_multi_company"/>
                    </group>
                    <notebook>
                        <page string="Configuration">
                            <group colspan="4" col="4" string="Connection">
                                <field name="account_number"/>
                                <field name="license_key" password="True"/>
                                <field name="service_url"/>
                            </group>
                            <group colspan="4" col="4">
                                <field name="date_expiration"/>
                                <button name="%(avatax_connector.avalara_salestax_ping_action)d" string="Test Connection" type="action" icon="fa-forward"/>
                            </group>
                            <group colspan="4" col="4" string="Adaptor">
                                <field name="request_timeout"/>
                                <field name="logging"/>
                            </group>
                            <group colspan="4" col="4">
                                <group colspan="2" col="2" expand="1" string="Address Validation">
                                    <field name="address_validation"/>
                                    <field name="validation_on_save" /> 
                                    <field name="force_address_validation"/> 
                                    <field name="result_in_uppercase" />
                                    <field name="auto_generate_customer_code" />
                                </group>
                                <group colspan="2" col="2" expand="1" string="Avalara Submissions / Transactions">
                                    <field name="on_order"/>
                                    <field name="on_line"/>
                                    <field name="upc_enable"/>
                                </group>
                            </group>
                            <group>
                                <separator string="Countries" colspan="4"/>
                                <label string="Countries Authorized to Process (ISO code)" colspan="2"/>
                                <field name="country_ids" colspan="4" nolabel="1"/>
                            </group>
                            <group colspan="4" col="4" string="Disable">
                                <field name="disable_tax_calculation"/>
                                <field name="disable_tax_reporting"/>		                    	
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="avalara_salestax_view_tree" model="ir.ui.view">
        <field name="name">avalara.salestax.tree</field>
        <field name="model">avalara.salestax</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="AvaTax API">
                <field name="company_id" groups="base.group_multi_company"/>
                <field name="company_code"/>
                <field name="account_number"/>
                <field name="service_url"/>
                <field name="date_expiration"/>
            </tree>
        </field>
    </record>

    <record id="avalara_salestax_action" model="ir.actions.act_window">
        <field name="name">AvaTax API</field>
        <field name="res_model">avalara.salestax</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help">Configuration of AvaTax in OpenERP</field>
    </record>

    <menuitem id="avatax_menu" name="AvaTax" parent="account.menu_finance_configuration" sequence="2"/>

    <menuitem action="avalara_salestax_action" id="avalara_salestax_menu" name="AvaTax API" parent="avatax_menu" sequence="30"/>
</odoo>
